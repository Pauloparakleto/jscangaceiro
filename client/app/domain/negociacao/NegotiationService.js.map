{"version":3,"sources":["../../../app-src/domain/negociacao/NegotiationService.js"],"names":["HTTPService","Negociacao","NegotiationService","constructor","_http","period","Promise","all","weekly","previousWeek","beforePreviousWeek","flat","sort","a","b","date","getTime","error","console","log","Error","callback","get","then","data","map","negotiation","Date","quantidade","valor"],"mappings":";;;;;;AAASA,iB,sBAAAA,W;;AACAC,gB,2BAAAA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAEIC,kB,GAAN,MAAMA,kBAAN,CAAyB;AAC9BC,sBAAa;AACX,eAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACD;;AAEKK,cAAN,GAAc;AAAA;;AAAA;AACZ,gBAAI;AACF,kBAAIA,SAAS,MAAMC,QAAQC,GAAR,CAAY,CAC7B,MAAKC,MAAL,EAD6B,EAE7B,MAAKC,YAAL,EAF6B,EAG7B,MAAKC,kBAAL,EAH6B,CAAZ,CAAnB;;AAMA,qBAAOL,OACJM,IADI,GAEJC,IAFI,CAEC,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUA,EAAEC,IAAF,CAAOC,OAAP,KAAmBH,EAAEE,IAAF,CAAOC,OAAP,EAA7B;AAAA,eAFD,CAAP;AAGD,aAVD,CAUE,OAAOC,KAAP,EAAc;AACdC,sBAAQC,GAAR,CAAYF,KAAZ;AACA,oBAAM,IAAIG,KAAJ,CAAU,iDAAV,CAAN;AACD;AAdW;AAeb;;AAEDZ,eAAOa,QAAP,EAAgB;AACd,iBAAO,KAAKjB,KAAL,CAAWkB,GAAX,CAAe,oBAAf,EACJC,IADI,CAEHC,QAAQA,KAAKC,GAAL,CAASC,eAAe,IAAIzB,UAAJ,CAAe,IAAI0B,IAAJ,CAASD,YAAYF,IAArB,CAAf,EAA2CE,YAAYE,UAAvD,EAAmEF,YAAYG,KAA/E,CAAxB,CAFL,EAIHZ,SACE;AACE,kBAAM,IAAIG,KAAJ,CAAU,oDAAV,CAAN;AACD,WAPA,CAAP;AASD;;AAEDX,qBAAaY,QAAb,EAAsB;AACpB,iBAAO,KAAKjB,KAAL,CAAWkB,GAAX,CAAe,sBAAf,EACJC,IADI,CAEHC,QAAQA,KAAKC,GAAL,CAASC,eAAe,IAAIzB,UAAJ,CAAe,IAAI0B,IAAJ,CAASD,YAAYF,IAArB,CAAf,EAA2CE,YAAYE,UAAvD,EAAmEF,YAAYG,KAA/E,CAAxB,CAFL,EAIHZ,SACE;AACE,kBAAM,IAAIG,KAAJ,CAAU,2DAAV,CAAN;AACD,WAPA,CAAP;AASD;;AAEDV,2BAAmBW,QAAnB,EAA4B;AAC1B,iBAAO,KAAKjB,KAAL,CAAWkB,GAAX,CAAe,uBAAf,EACJC,IADI,CAEHC,QAAQA,KAAKC,GAAL,CAASC,eAAe,IAAIzB,UAAJ,CAAe,IAAI0B,IAAJ,CAASD,YAAYF,IAArB,CAAf,EAA2CE,YAAYE,UAAvD,EAAmEF,YAAYG,KAA/E,CAAxB,CAFL,EAIHZ,SACE;AACE,kBAAM,IAAIG,KAAJ,CAAU,2DAAV,CAAN;AACD,WAPA,CAAP;AASD;AAxD6B,O","file":"NegotiationService.js","sourcesContent":["import { HTTPService } from \"../../util/HTTPService.js\";\nimport { Negociacao } from \"../negociacao/Negociacao.js\";\n\nexport class NegotiationService {\n  constructor(){\n    this._http = new HTTPService();\n  }\n\n  async period(){\n    try {\n      let period = await Promise.all([\n        this.weekly(),\n        this.previousWeek(),\n        this.beforePreviousWeek()\n      ]);\n\n      return period\n        .flat()\n        .sort((a, b) => b.date.getTime() - a.date.getTime());\n    } catch (error) {\n      console.log(error);\n      throw new Error('Something went wrong on importing negotiations!');\n    }\n  }\n\n  weekly(callback){\n    return this._http.get('negociacoes/semana')\n      .then(\n        data => data.map(negotiation => new Negociacao(new Date(negotiation.data), negotiation.quantidade, negotiation.valor))\n        ,\n        error =>\n          {\n            throw new Error('Something went wrong importing weekly negotiations')\n          }\n      )\n  }\n\n  previousWeek(callback){\n    return this._http.get('negociacoes/anterior')\n      .then(\n        data => data.map(negotiation => new Negociacao(new Date(negotiation.data), negotiation.quantidade, negotiation.valor))\n        ,\n        error =>\n          {\n            throw new Error('Something went wrong importing previous week negotiations')\n          }\n      )\n  }\n \n  beforePreviousWeek(callback){\n    return this._http.get('negociacoes/retrasada')\n      .then(\n        data => data.map(negotiation => new Negociacao(new Date(negotiation.data), negotiation.quantidade, negotiation.valor))\n        ,\n        error =>\n          {\n            throw new Error('Something went wrong importing previous week negotiations')\n          }\n      )\n  }\n}\n"]}